<div
  class="bg-white dark:bg-gray-800 relative shadow-lg sm:rounded-xl overflow-hidden transition-all duration-300"
>
  <!-- Верхняя панель -->
  <div
    class="flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4 border-b border-gray-200 dark:border-gray-700"
  >
    <!-- Поиск -->
    <div class="w-full md:w-1/2">
      @if (isSearchable) {
        <div class="relative group">
          <span class="sr-only">Поиск</span>
          <div
            class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400 group-focus-within:text-primary-500 transition-colors"
          >
            <!-- Иконка поиска -->
            <svg
              class="w-5 h-5"
              fill="currentColor"
              viewBox="0 0 20 20"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89
                  3.476l4.817 4.817a1 1 0
                  01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
              />
            </svg>
          </div>
          <input
            (input)="onSearchChange($event)"
            type="text"
            id="simple-search"
            placeholder="Поиск..."
            class="w-full pl-10 pr-4 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200"
          />
        </div>
      }
    </div>

    <!-- Кнопки -->
    <div
      class="w-full md:w-auto flex flex-col md:flex-row gap-2 items-stretch md:items-center justify-end"
    >
      <button
        (click)="create.emit()"
        type="button"
        class="flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium text-white rounded-lg bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 focus:ring-4 focus:ring-primary-300 dark:focus:ring-primary-800 shadow-md transition-all duration-200"
      >
        <svg
          class="h-4 w-4"
          fill="currentColor"
          viewBox="0 0 20 20"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M10 3a1 1 0 011 1v5h5a1 1 0
              110 2h-5v5a1 1 0 11-2 0v-5H4a1
              1 0 110-2h5V4a1 1 0 011-1z"
          />
        </svg>
        Создать
      </button>
    </div>
  </div>

  <!-- Таблица -->
  <div class="overflow-x-auto">
    <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
      <thead
        class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"
      >
        <tr>
          @for (col of columns; track col) {
            <th scope="col" class="px-4 py-3">{{ col.title }}</th>
          }
        </tr>
      </thead>
      <tbody>
        @for (item of data; track item) {
          <tr
            (click)="onRowSelected(item)"
            class="border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 cursor-pointer transition-colors duration-150"
          >
            @for (col of columns; let i = $index; track col) {
              @if (col.template) {
                <td class="px-4 py-3">
                  <ng-container
                    *ngTemplateOutlet="
                      col.template;
                      context: { $implicit: item[col.key], row: item }
                    "
                  ></ng-container>
                </td>
              } @else {
                @if (i === 0) {
                  <th
                    scope="row"
                    class="px-4 py-3 font-medium text-gray-900 whitespace-nowrap dark:text-white"
                  >
                    {{ item[col.key] ?? "N/A" }}
                  </th>
                } @else {
                  <td class="px-4 py-3">{{ item[col.key] ?? "N/A" }}</td>
                }
              }
            }
          </tr>
        }
      </tbody>
    </table>
  </div>

  <!-- Пагинация -->
  <nav
    class="flex justify-center p-4 border-t border-gray-200 dark:border-gray-700"
    aria-label="Table navigation"
  >
    @if (pagination.hasMore) {
      <button
        (click)="onPageChange()"
        type="button"
        class="px-5 py-2.5 text-sm font-medium text-white bg-gradient-to-r from-purple-500 via-purple-600 to-purple-700 hover:scale-105 focus:ring-4 focus:outline-none focus:ring-purple-300 dark:focus:ring-purple-800 rounded-lg shadow-lg shadow-purple-500/50 dark:shadow-purple-800/80 transition-all duration-200"
      >
        Загрузить еще
      </button>
    }
  </nav>
</div>
